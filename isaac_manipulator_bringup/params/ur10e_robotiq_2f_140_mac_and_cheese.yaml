camera_type: REALSENSE
num_cameras: 1
workflow_type: PICK_AND_PLACE

ur_type: ur10e
gripper_type: robotiq_2f_140
use_sim_time: 'false'
setup: galileo_ur10e_test_bench
robot_ip: 192.56.1.2
log_level: error
# Path to Moveit .scene file with static collision objects to preload
moveit_collision_objects_scene_file: '$(ros2 pkg prefix --share isaac_manipulator_bringup)/config/scene_objects/galileo_ur10e_test_bench/galileo_ur10e_test_scene_objects.scene'

# Robot description params
urdf_path: $(ros2 pkg prefix --share isaac_manipulator_robot_description)/urdf/ur_robotiq_gripper.urdf.xacro
# Relative path to the isaac_manipulator_robot_description package, note this is important
srdf_path: srdf/ur_robotiq_2f_140_gripper.srdf.xacro
joint_limits_file_path: config/joint_limits.yaml
kinematics_file_path: config/kinematics.yaml
moveit_controllers_file_path: config/moveit_controllers.yaml
ros2_controllers_file_path: $(ros2 pkg prefix --share isaac_manipulator_robot_description)/config/ros2_control_controllers.yaml
controller_spawner_timeout: 10
tf_prefix: ''
runtime_config_package: 'ur_robot_driver'
initial_joint_controller: 'scaled_joint_trajectory_controller'
ur_calibration_file_path: ''

# cuMotion-specific params
cumotion_urdf_file_path: $(ros2 pkg prefix --share isaac_ros_cumotion_robot_description)/urdf/ur10e_robotiq_2f_140.urdf
cumotion_xrdf_file_path: $(ros2 pkg prefix --share isaac_ros_cumotion_robot_description)/xrdf/ur10e_robotiq_2f_140.xrdf
distance_threshold: 0.05
# Enable/disable nvblox for 3D scene reconstruction and dynamic collision avoidance
enable_nvblox: 'true'

# Visualization
rviz_config_file: $(ros2 pkg prefix --share isaac_manipulator_bringup)/config/visualization/pick_and_place.rviz
use_pose_from_rviz: 'false'

# Time sync params to sync joint states and images
time_sync_slop: 0.1 # This is important so that robot segmentor does not stop publishing under load.
filter_depth_buffer_time: 0.7

# Perception
depth_type: ESS_FULL
enable_dnn_depth_in_realsense: 'false'
object_detection_type: RTDETR
selection_policy: HIGHEST_SCORE
segmentation_type: NONE  # Can be SEGMENT_ANYTHING, SEGMENT_ANYTHING2, or NONE
segment_anything_input_points_topic: input_points
segment_anything_input_detections_topic: input_detections
segment_anything_enable_debug_output: 'false'
sam_model_repository_paths: ['${ISAAC_ROS_WS}/isaac_ros_assets/models']
ess_engine_file_path: ${ISAAC_ROS_WS}/isaac_ros_assets/models/dnn_stereo_disparity/dnn_stereo_disparity_v4.1.0_onnx_trt10.13/ess.engine
foundationstereo_engine_file_path: ${ISAAC_ROS_WS}/isaac_ros_assets/models/foundationstereo/deployable_foundation_stereo_small_v1.0/foundationstereo_320x736.engine
pose_estimation_type: FOUNDATION_POSE
pose_estimation_input_qos: 'SENSOR_DATA'  # We use DEFAULT here since we use a drop node at the start of RT-DETR-Foundation Pose pipeline limiting hz to 1 hence we dont want to drop any message
pose_estimation_input_fps: '15' # Standard FPS for pose estimation input
pose_estimation_dropped_fps: '13' # Standard FPS for dropped pose estimation
dope_engine_file_path: ${ISAAC_ROS_WS}/isaac_ros_assets/models/dope/soup_60.plan
dope_model_file_path: ${ISAAC_ROS_WS}/isaac_ros_assets/models/dope/soup_60.onnx

foundation_pose_mesh_file_path: ${ISAAC_ROS_WS}/isaac_ros_assets/isaac_ros_foundationpose/Mac_and_cheese_0_1/Mac_and_cheese_0_1.obj
foundation_pose_refine_engine_file_path: ${ISAAC_ROS_WS}/isaac_ros_assets/models/foundationpose/refine_trt_engine.plan
foundation_pose_texture_path: ${ISAAC_ROS_WS}/isaac_ros_assets/isaac_ros_foundationpose/Mac_and_cheese_0_1/materials/textures/baked_mesh_tex0.png
foundation_pose_score_engine_file_path: ${ISAAC_ROS_WS}/isaac_ros_assets/models/foundationpose/score_trt_engine.plan

grounding_dino_engine_file_path: ${ISAAC_ROS_WS}/isaac_ros_assets/models/grounding_dino/grounding_dino_model.plan
grounding_dino_model_file_path: ${ISAAC_ROS_WS}/isaac_ros_assets/models/grounding_dino/grounding_dino_model.onnx
grounding_dino_default_prompt: 'mac and cheese box.'
grounding_dino_confidence_threshold: '0.6'
grounding_dino_network_image_width: '960'
grounding_dino_network_image_height: '544'

rtdetr_engine_file_path: ${ISAAC_ROS_WS}/isaac_ros_assets/models/synthetica_detr/sdetr_grasp.plan
object_class_id: '22' # Mac and cheese
rt_detr_confidence_threshold: '0.5'

# Pick and place params
use_ground_truth_pose_in_sim: 'false'
pick_and_place_planner_retries: 5
pick_and_place_retry_wait_time: 5.0
sim_gt_asset_frame_id: 'mac_and_cheese'  # Make sure you add mac and cheese to the Sim scene
grasps_file_path: $(ros2 pkg prefix --share isaac_manipulator_robot_description)/config/robotiq_2f_140_grasps_mac_and_cheese_galileo_ur10e_test_bench.yaml
trigger_aabb_object_clearing: 'true'
time_dilation_factor: '0.2' # This parameter is used to control the speed of the robot

# For pick and place automated testing
move_to_home_pose_after_place: 'true'
home_pose: [0.0, 0.4, 0.7, 0.69705, 0.71628, 0.030307, 0.012237]

# Object Attachment params
object_attachment_type: CUSTOM_MESH
object_attachment_scale: [0.09, 0.185, 0.035]
attach_object_mesh_file_path: ${ISAAC_ROS_WS}/isaac_ros_assets/isaac_ros_foundationpose/Mac_and_cheese_0_1/Mac_and_cheese_0_1.obj
end_effector_mesh_resource_uri: package://isaac_manipulator_robot_description/meshes/robotiq_2f_140.obj

# Gear assembly
gear_assembly_model_path: $ISAAC_ROS_WS/isaac_ros_assets/isaac_manipulator_ur_dnn_policy/
gear_assembly_model_file_name: model.pt
gear_assembly_policy_alpha: 0.0
gear_assembly_observation_topic: /gear_assembly/observation
gear_assembly_joint_state_topic: /joint_states
gear_assembly_target_joint_state_topic: /target_joint_positions
gear_assembly_target_tcp_state_topic: /gear_assembly/target_tcp_state
gear_assembly_gear_insertion_request_topic: /gear_assembly/gear_insertion_request
gear_assembly_goal_pose_topic: /gear_assembly/goal_pose
gear_assembly_gear_insertion_status_topic: /gear_assembly/gear_insertion_status
gear_assembly_ros_bag_folder_path: $ISAAC_ROS_WS/rl_inference_policy
gear_assembly_enable_recording: 'true'
gear_assembly_use_joint_state_planner: 'true'
gear_assembly_peg_stand_mesh_file_path: $ISAAC_ROS_WS/isaac_ros_assets/isaac_manipulator_ur_dnn_policy/gear_base/gear_base.obj
gear_assembly_gear_large_mesh_file_path: $ISAAC_ROS_WS/isaac_ros_assets/isaac_manipulator_ur_dnn_policy/gear_large/gear_large.obj
gear_assembly_gear_small_mesh_file_path: $ISAAC_ROS_WS/isaac_ros_assets/isaac_manipulator_ur_dnn_policy/gear_small/gear_small.obj
gear_assembly_gear_medium_mesh_file_path: $ISAAC_ROS_WS/isaac_ros_assets/isaac_manipulator_ur_dnn_policy/gear_medium/gear_medium.obj
gear_assembly_use_ground_truth_pose_in_sim: 'false'
gear_assembly_verify_pose_estimation_accuracy: 'false'
gear_assembly_run_rl_inference: 'true'
gear_assembly_output_dir: '$ISAAC_ROS_WS/gear_assembly_outputs'
gear_assembly_offset_for_place_pose: 0.32  # 0.28 for 85 gripper
gear_assembly_offset_for_insertion_pose: 0.0
gear_assembly_timeout_for_insertion_action_call: 7.0  # in seconds
gear_assembly_model_frequency: 30.0  # in Hz

# Visualization
enable_rviz_visualization: 'false'
enable_foxglove_visualization: 'false'

# Nsight Profiling
delay_to_start_nsight: '5' # In seconds
nsight_profile_duration: '20' # In seconds
nsight_profile_output_file_path: ${ISAAC_ROS_WS}/nsight_profile.nsys
enable_nsight_profiling: 'false'
enable_system_wide_profiling: 'false'

# MPS parameters
enable_cuda_mps: 'false'
cuda_mps_pipe_directory: '${ISAAC_ROS_WS}/mps_pipe_dir'  # Create this directory before running if mps = 'true'
# For nvblox, foundation pose, rtdetr, dope, nitros type adaptation
cuda_mps_active_thread_percentage_container: '100'
cuda_mps_client_priority_container: '1'
# For robot segmenter
cuda_mps_client_priority_robot_segmenter: '1'
cuda_mps_active_thread_percentage_robot_segmenter: '100'
# For cuMotion planner
cuda_mps_client_priority_planner: '0'  # We give this a higher priority to ensure that the planner is not starved
cuda_mps_active_thread_percentage_planner: '100'

# Behavior tree params
behavior_tree_config_file: ${ISAAC_MANIPULATOR_PICK_AND_PLACE_CONFIG_DIR}/multi_object_pick_and_place_behavior_tree_params.yaml
blackboard_config_file: ${ISAAC_MANIPULATOR_PICK_AND_PLACE_CONFIG_DIR}/multi_object_pick_and_place_blackboard_params.yaml
print_ascii_tree: 'false'
manual_mode: 'false'
